### vue-admin运行

```
npm install
```

```
npm run serve
```


### 介绍

vue: vue2.x
脚手架: vuecli4.x

### 目的

- 构建属于自己的vue项目

  - vue的api的熟练使用

  - element ui组件的熟练使用
  - svg-icon的使用

  - vue路由的使用
  - vuex的熟练使用
  - axiaos请求的封装
  - vue-config.js的配置

- 表格插件

  - dashtable
  - jqgridr

- 编辑器
  - wangeditor

- 图表
  - echart

###　创建仓库和构建项目

####  github上创建仓库

![在这里插入图片描述](https://img-blog.csdnimg.cn/3161f1abe3f7472ba325277c4d3efe16.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/f4a10ecde08d4e3c91b2394c1fdd2263.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



#### 创建分支的操作

![在这里插入图片描述](https://img-blog.csdnimg.cn/3f17c150eac846ecbd3b1335fc73eb7d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



![在这里插入图片描述](https://img-blog.csdnimg.cn/e0e0ecfded94454693b99aec0ff3ed90.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



![在这里插入图片描述](https://img-blog.csdnimg.cn/2a7c6e565a6742f4aba509477afc6b45.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/5f78598cc46a4227b8d5d85d0981b833.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



#### 构建脚手架项目

- 将项目添加进工作区
- ctrl+~进入终端(vscode)
- 创建项目: vue create vue-admin
- 建议手动配置选择自己需要的vue版本和插件

![在这里插入图片描述](https://img-blog.csdnimg.cn/379b9c06fd044f2db8ad42c1684162c7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



![在这里插入图片描述](https://img-blog.csdnimg.cn/e0329c636fea4adbabbd71a7524e0bc0.png)

- 启动项目

```
npm run serve
```



![在这里插入图片描述](https://img-blog.csdnimg.cn/8b116c116fa34a65b1721c437f5c7d72.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)





![在这里插入图片描述](https://img-blog.csdnimg.cn/1a2366eaa7d94b7ba5b9daf39bbd5b53.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/4f52bd1c83e443598381c830a5fe7a03.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)





#### 配置全局的scss样式

![在这里插入图片描述](https://img-blog.csdnimg.cn/bb19b79e1a70489291b2e2c18e6a2c60.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/76aceb2385bf4e808a1cf0fd8346f57b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



![在这里插入图片描述](https://img-blog.csdnimg.cn/507d9d721da54c5da36dccb41ece0d59.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



![在这里插入图片描述](https://img-blog.csdnimg.cn/2082922045254777b61a59ed9062d9f3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/bf2e376f487a4845a6d605b21133acb0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/6c332a4b68a348edabd63e6a74169002.png)

#### router重定向

```VUE
 {
    path: '/',
    redirect: 'login'
  },
```



#### git提交命令

> git拉取参考：https://www.cnblogs.com/taohuaya/p/10761799.html

> git推送参考: https://www.cnblogs.com/qianqiannian/p/6008140.html

- git status
- git add .
- git commit -m "构建vue3的项目、scss全局配置、vue.config.js的配置、axios的拦截 配置、登录页面"
- git pull      先拉一下
- git push(详细：git push --set-upstream origin feature-vue3-admin-V1.0.0-202109028)

其他：删除分支：`git branch -d <name>`

​			删除远程分支： git push origin -d 远程分支名

​			拉取项目的指定分支:	git clone -b 分支名 项目地址

![在这里插入图片描述](https://img-blog.csdnimg.cn/13d4a6fe017a47088cd04bdff77c46ca.png)

这个原因是使用了科学上网

![在这里插入图片描述](https://img-blog.csdnimg.cn/d156c60a680f48c582ba1f5eb7162e5f.png)

![在这里插入图片描述](https://img-blog.csdnimg.cn/549bae0a0a6a4c4f86c4f598e68c977a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

我发现没有代理之后还是报那个

![在这里插入图片描述](https://img-blog.csdnimg.cn/4f0e83965fd747d5a5fa863e3a8ad514.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

打开科学上网后

![在这里插入图片描述](https://img-blog.csdnimg.cn/c4e1900cda284707807369789e62d447.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

醉了，不知道什么鬼，猜测可能是网速原因，搞心态，有时候没这个问题

有时候报：

![在这里插入图片描述](https://img-blog.csdnimg.cn/9abb7bc2cc1746ea897d0adcfa139107.png)

- 两个解决办法：

1. 输入git config --global http.sslVerify "false"，解除ssl验证

2. 将地址https://改为git://，避开ssl验证

灵不灵就不好说，有时候啥问题也没有

-----------------

#### Login下的index.vue

  - 基于邮箱的登录
  - 通过邮箱发送验证码
  - 校验、按钮的状态
  - 获取验证码的操作完善
  - 登录的操作未完善

  ![在这里插入图片描述](https://img-blog.csdnimg.cn/636c5523689c4662a113c0ad59bb189e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

#### Register下的index.vue

  - 基于邮箱的注册  
  - 通过邮箱发送验证码
  - 校验、按钮的状态
  - 获取验证码的操作完善
  - 注册的操作未完善

  ![在这里插入图片描述](https://img-blog.csdnimg.cn/fe32b44b871e48398f94b58f114fbd52.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

#### axios拦截器、跨域

```npm i -s axios```

- 在页面直接用axios发送请求(维护比较麻烦)
- 将axios进行封装配置拦截器和响应器

> 参考文档： http://axios-js.com/zh-cn/docs/

```
# 默认使用的development,可以在package.json中改"dev": "vue-cli-service serve --mode production",
# 此处的/dev-api对应代理的/dev-api
# 定义变量以VUE_APP开头
VUE_APP_BASE_API = /dev-api
```

```
 proxy: {
      //设置代理
      '/dev-api': {
        // target: `${VUE_APP_BASE_API}`,
        target: 'http://old.web-jshtml.cn/vue_admin_api',
        changeOrigin: true,
        ws: true,
        // secure: false, //如果是http接口，需要配置该参数
        //将上面的dev-api变成''
        pathRewrite: {
          '^/dev-api': ''
        }
      }
```

```
const BASEURL = process.env.NODE_ENV === 'production' ? process.env.VUE_APP_BASE_API : process.env.VUE_APP_BASE_API;
const service = axios.create({
    baseURL: BASEURL,  // http://192.168.0.106:8080/devApi/  == http://old.web-jshtml.cn/vue_admin_api
    timeout: 15000,   // 超时
    // 网络请求接口，假设 5000
    // 1000 2000，
});
```

接口是别人的验证码邮箱验证码接口，此处的axios没有对token进行处理，后续会加

### 构建布局、将导航宽度提取为全局变量

![在这里插入图片描述](https://img-blog.csdnimg.cn/cfadb773512049eaa93fbf71cae716fd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/335e1a79f2dd4d9489af5a243fb9ea4c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



### 导航

遍历路由的导航，下面的只是一种写法，根据需求去修改路由和路由的遍历，也可以在meta下自定义图标

![在这里插入图片描述](https://img-blog.csdnimg.cn/62b3e14ad67142e1a93b70cf93e40baf.png)



- router下的index.js下的路由

```js
const routes = [

  {
    path: "/",
    nmae: "Layout",
    redirect: "/home",
    meta: {
      name: "控制台"
    },
    component: () => import("../views/layout/index.vue"),
    children: [
      {
        path: "/home",
        name: "Home",
        meta: {
          name: "首页"
        },
        component: () => import("../views/home/index.vue"),
      }
    ]
  },
  {
    path: '/blog',
    name: 'Blog',
    meta: {
      name: '博客',
    },
    component: () => import("../views/layout/index.vue"),
    children: [
      {
        path: 'articleManage',
        component: () => import('@/views/blog/articleManage/index'),
        name: 'ArticleManage',
        meta: { name: '博客管理'}
      }, {
        path: 'classify',
        name: 'Classify',
        component: () => import('@/views/blog/classify/index'),
        meta: { name: '分类管理'}
      }, {
        path: 'writeBlog',
        name: 'WriteBlog',
        component: () => import('@/views/blog/writeBlog/index'),
        meta: {name: '写博客'}
      },
    ]
  },
  // {
  //   path: "/",
  //   redirect: "login"
  // },
  {
    path: "/login",
    name: "Login",
    meta: {
      name: "登录"
    },
    hidden: true,
    component: () => import("../views/login/index.vue"),
  },
  {
    path: "/register",
    name: "Register",
    meta: {
      name: "注册"
    },
    hidden: true,
    component: () => import("../views/register/index.vue")
  },
  {
    path: "/repassword",
    name: "RePassword",
    meta: {
      name: "重置密码"
    },
    hidden: true,
    component: () => import("../views/rePassword/index.vue")
  },

];
```



- 获取到路由的信息

```vue
  data() {    return {      routes: [],    };  },  created() {    let that = this;    that.routes = that.$router.options.routes;    console.log(that.routes);  },
```

- 遍历路由

  - 需要的效果不一样遍历写的也不一样

  - 借助template进行遍历

```vue
        <el-menu      default-active="1"      background-color="transparent"      active-text-color="#409EFF"      class="el-menu-vertical-demo"      router    >      <!-- 遍历路由 -->      <template v-for="(item, index) in routes">        <!-- 只遍历未隐藏并且有子路由不为空的的路由 -->        <template v-if="!item.hidden && item.children">          <!-- 判断子路由是否为1-->          <el-menu-item            v-if="item.children.length === 1"            :key="item.children.id"            :index="item.children[0].path"          >            <!-- 显示子路由的名称 -->            <template slot="title">              <i class="el-icon-location"></i>              <span>{{ item.children[0].meta.name }}</span>            </template>          </el-menu-item>          <!-- 子路由不为1的路由 -->          <el-submenu v-else :key="item.id" :index="item.path">            <template slot="title">              <i class="el-icon-location"></i>              <span>{{ item.meta.name }}</span>            </template>            <template v-for="subItem in item.children">              <el-menu-item                v-if="!subItem.hidden"                :key="subItem.id"                :index="subItem.path"                >{{ subItem.meta.name }}</el-menu-item              >            </template>          </el-submenu>        </template>      </template>    </el-menu>
```

- 在el-menu中启用router会按照路径(也就是倒焊组件上的index绑定的值)跳转到不同的路由

![在这里插入图片描述](https://img-blog.csdnimg.cn/8d406d886a9846e691ccafc555308f24.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



- 当选中导航高亮，也就是修改导航的背景和文字颜色

- 需要将样式写到全局专门写一个element-ul.css来写全局element-ui的样式

```css
// 当子路由为1时就是用el-menu-item// 样式.el-menu-item {    font-size: 14px;    &.is-active { background-color: #c6c6c6 !important; }}// 子路由大于1时// 修改一级菜单样式,可以不要// li.el-submenu {//     &.is-active.is-opened .el-submenu__title { background-color: hotpink !important; }// }// 子菜单的样式.el-submenu .el-menu-item {    font-size: 14px;    padding-left: 50px !important;    // &.is-active { background-color: rgba(245, 108, 108, 0.2) !important; }    &.is-active { background-color: #c6c6c6 !important; }}
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/cd940477c088465aac7381435f64891c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/806307e8ee864acc94c13f80bca96e83.png)

### svg的使用

- element-ui自带的图标不好用，使用svg格式的图标，图标库用iconfont

#### 引入全局组件

Vue.component(‘组件名称’， ‘组件代码’)

- 两种编译方式

1、compiler（模板）模式

2、runtime模式（运行时），

vue模块的默认为runtime模式， 指向了"dist/vue.runtime.common.js"位置。

![在这里插入图片描述](https://img-blog.csdnimg.cn/7ae6699625eb4101affee5d128841079.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_19,color_FFFFFF,t_70,g_se,x_16)

![在这里插入图片描述](https://img-blog.csdnimg.cn/ec198aab03e84306aabe7609bcc1f51c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)



#### icons文件夹

- 在src下创建icons文件夹并且创建两个文件

  - index.js (在该文件下使用全局组件,将SvgIcon.vue当作组件引入到该文件)
  - SvgIcon.vue

  ```js
  import Vue from 'vue';import SvgIcon from './SvgIcon.vue';Vue.component('svg-icon',SvgIcon)
  ```

- 将icons的index.js(icon的全局组件)引入到main.js文件

  *//引入icon的全局文件*

  ```import "./icons/index.js";``

  

#### 引入svg

- 在SvgIcon.vue引入

```vue
<svg :class="svgClass" aria-hidden="true">    <use :xlink:href="name"></use> </svg>
```

在index.js下引入

```js
//读取指定目录的所有文件,用来读取svg文件夹下存的图标/**第一个：目录第二个：是否遍历子级目录第三个：定义遍历文件规则 */const req = require.context('./svg', false, /\.svg$/)const requireAll = requireContext => {  return requireContext.keys().map(requireContext)}requireAll(req)
```

- 在vue.config.js配置

![在这里插入图片描述](https://img-blog.csdnimg.cn/f673b99ac35743b2824f602a9adf9a10.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

```js
const svgRule = config.module.rule("svg");     svgRule.uses.clear();     svgRule         .use("svg-sprite-loader")         .loader("svg-sprite-loader")         .options({             symbolId: "icon-[name]",             include: ["./src/icons"]         });  
```

- 安装svg用的依赖

``` npm install svg-sprite-loader -S```



#### props

- 一般我们父组件向子组件传递数据，需要把子组件引入到父组件内，但是我们把关于icon的组件做成了全局组件，就不需要引入了

小试牛刀：

```vue
 //在el-menu 后加上 <svg-icon iconClass="home" className="home"/>
```

SvgIcon.vue

```vue
<template>  <div>    <h3>{{ iconClass }}</h3>  </div></template><script>export default {  name: "SvgIcon",  props: ["iconClass", "className"],  data() {    return {    };  },  created() {    console.log(this.iconClass);  },  methods: {},};</script><style lang="scss" scoped></style>
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/801f14a9a5ae41ca910f6d823dfa412f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

- 对传的数据进行了规定

```vue
props: {      iconClass: {          type: String,          //规定传入参数的类型          default: '',           //默认值        //   default: () => [],  //默认值是对象的写法          required: true,         //必须传值进来        //   validator: (value) => {       //校验        //       return value >= 0;        //   }      },      className: {          type: String,          default: '',          required: true      }  },
```

#### computed

- 计算属性(监听属性变化)，当属性改变时，对属性进行操作有get、set方法，写一个按钮的事件看的很明显

> 参考：https://cn.vuejs.org/v2/api/#computed

> vue中computed(计算属性) 和 watch在实现父子组件props同步时的实际区分: https://blog.csdn.net/weixin_30851867/article/details/99581227?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link

> 子组件methods中获取props的值：https://blog.csdn.net/qq_44235822/article/details/97659201?utm_source=app&app_version=4.16.0&code=app_1562916241&uLinkId=usr1mkqgl919blen





#### svg-icon使用props和computed

- props从父组件获取icon的名称和样式
- computed拼接传过来的icon和名称和样式
- 遇到一个bug，图标和标题串行了

![在这里插入图片描述](https://img-blog.csdnimg.cn/eb8d49426d574962bb398d6f2f94de11.png)



强行设置了svg-icon样式，这个样式太难搞了，详情用浏览器查看源代码里面的样式，我感觉我配的有问题

```vue
<style lang="scss" scoped>.svg-icon {  position: relative;  width: 1em;  height: 1em;  float: left;  margin-top: 15px;  margin-right: 10px;  font-size: 20px;}</style>
```



#### 代码

SvgIcon.vue

```vue
<template>  <div>    <svg :class="svgClass" aria-hidden="true">      <use :xlink:href="iconName"></use>    </svg>  </div></template><script>export default {  name: "SvgIcon",  props: {    iconClass: {      type: String, //规定传入参数的类型      default: "", //默认值      //   default: () => [],  //默认值是对象的写法      //   required: true, //必须传值进来      //   validator: (value) => {       //校验      //       return value >= 0;      //   }    },    className: {      type: String,      default: "",      //   required: true,    },  },  data() {    return {      newIconClass: "",      newClassName: "",    };  },  computed: {    iconName: {      get() {        return `#icon-${this.iconClass}`;       //${}是es6的语法      },    },    svgClass: {      get() {        if (this.className) {          return `svg-icon ${this.className}`;        } else {          return `svg-icon`;        }      },    },  },  created() {},  methods: {},};</script><style lang="scss" scoped>.svg-icon {  position: relative;  width: 1em;  height: 1em;  float: left;  margin-top: 15px;  margin-right: 10px;  font-size: 20px;}</style>
```

router的index.js的路由

```js
const routes = [  {    path: "/",    nmae: "Layout",    redirect: "/home",    meta: {      name: "控制台"    },    component: () => import("../views/layout/index.vue"),    children: [      {        path: "/home",        name: "Home",        meta: {          name: "首页",          icon: "home"        },        component: () => import("../views/home/index.vue"),      }    ]  },  {    path: '/blog',    name: 'Blog',    meta: {      name: '博客',      icon: 'blog'    },    component: () => import("../views/layout/index.vue"),    children: [      {        path: 'articleManage',        component: () => import('@/views/blog/articleManage/index'),        name: 'ArticleManage',        meta: { name: '博客管理', icon: 'blogManage'}      }, {        path: 'classify',        name: 'Classify',        component: () => import('@/views/blog/classify/index'),        meta: { name: '分类管理', icon: 'classify'}      }, {        path: 'writeBlog',        name: 'WriteBlog',        component: () => import('@/views/blog/writeBlog/index'),        meta: {name: '写博客', icon: 'writeBlog'}      },    ]  },  // {  //   path: "/",  //   redirect: "login"  // },  {    path: "/login",    name: "Login",    meta: {      name: "登录"    },    hidden: true,    component: () => import("../views/login/index.vue"),  },  {    path: "/register",    name: "Register",    meta: {      name: "注册"    },    hidden: true,    component: () => import("../views/register/index.vue")  },  {    path: "/repassword",    name: "RePassword",    meta: {      name: "重置密码"    },    hidden: true,    component: () => import("../views/rePassword/index.vue")  },];
```

Nav.vue的遍历导航

```vue
 <el-menu      default-active="1"      background-color="transparent"      active-text-color="#303133"      class="el-menu-vertical-demo"      router    >      <!-- 遍历路由 -->      <template v-for="item in routes">        <!-- 只遍历未隐藏并且有子路由不为空的的路由 -->        <template v-if="!item.hidden && item.children">          <!-- 判断子路由是否为1-->          <el-menu-item            v-if="item.children.length === 1"            :key="item.children.id"            :index="item.children[0].path"          >            <!-- 显示子路由的名称 -->            <template slot="title">              <!-- <svg-icon iconClass="home" className="home"/> -->              <!-- <i class="el-icon-location"></i> -->              <svg-icon                :iconClass="item.children[0].meta.icon"                :className="item.children[0].meta.icon"              />              <span class="slot"> {{ item.children[0].meta.name }}</span>            </template>          </el-menu-item>          <!-- 子路由不为1的路由 -->          <el-submenu v-else :key="item.id" :index="item.path">            <template slot="title">              <svg-icon                :iconClass="item.meta.icon"                :className="item.meta.icon"              />              <span slot="title">{{ item.meta.name }}</span>            </template>            <template v-for="subItem in item.children">              <el-menu-item                v-if="!subItem.hidden"                :key="subItem.id"                :index="item.path + '/' + subItem.path"              >                <template slot="title">                  <svg-icon                    :iconClass="subItem.meta.icon"                    :className="subItem.meta.icon"                  />                  <span class="slot"> {{ subItem.meta.name }}</span>                </template>              </el-menu-item>            </template>          </el-submenu>        </template>      </template>    </el-menu>
```

element-ui.scss

```css
// 当子路由为1时就是用el-menu-item// 样式.el-menu-item {    font-size: 14px;    &.is-active { background-color: #c6c6c6 !important; }}// 子路由大于1时// 修改一级菜单样式,可以不要// li.el-submenu {//     &.is-active.is-opened .el-submenu__title { background-color: hotpink !important; }// }// 子菜单的样式.el-submenu .el-menu-item {    font-size: 14px;    padding-left: 50px !important;    // &.is-active { background-color: rgba(245, 108, 108, 0.2) !important; }    &.is-active { background-color: #c6c6c6 !important; }
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/c8e8aab2cab74524b19e70964601c833.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_13,color_FFFFFF,t_70,g_se,x_16)



### 导航折叠

- 导航折叠
- 左侧栏折叠
- header折叠
- 主面板折叠

#### store存折叠按钮的状态

```js
import Vue from "vue";import Vuex from "vuex";Vue.use(Vuex);/** 别的文件调用store    this.$store.state.isCollapse      //获取原值    this.$store.getters.isCollapse    //获取处理过的值    this.$store.commit('SET_ISCOLLAPSE',true) //修改state里面参数的值 */export default new Vuex.Store({  //state用来存储参数  state: {    isCollapse: false  },  mutations: {      //修改state里面参数的值    //函数名以SET_参数名大写    SET_ISCOLLAPSE(state, value) {      state.isCollapse = !state.isCollapse;    }  },  actions: {},  modules: {},  getters: {    //相当于computed    isCollapse: () => !state.isCollapse  }});
```

#### Header.vue中给折叠按钮添加事件

```
  //添加事件   <div class="pull-left header-icon" v-on:click="toggleMenu">      <svg-icon  :iconClass="foldMenu" :className="foldMenu" />    </div>        //修改isCollapse的值而修改折叠按钮的方向      methods: {      toggleMenu(){          this.$store.commit('SET_ISCOLLAPSE')         //  console.log("foldmenu:"+this.$store.state.isCollapse)          if(this.$store.state.isCollapse){              this.foldMenu = 'fold-right'          }else{              this.foldMenu = 'fold-left'          }      }  },
```



#### Nav.vue中el-menu上添加 :*collapse*="isCollapse"

```vue
 computed: {    isCollapse: {      get() {        return this.$store.state.isCollapse;      },    },  },
```

导航折叠完成了



#### 左侧栏、header、main折叠

在index.vue添加menuState通过isCollapse的值控制样式

```vue
<template>    <div id="layout" :class="[menuState? 'close': 'open']">        <Header/>        <Main/>        <Nav/>    </div></template>  computed: {        menuState: {            get(){                return this.$store.state.isCollapse;            }        }    }
```

在Nav.vue添加

```
.open {    .main-content { padding-left: $navMenu + 30; }}.close {    .main-content { padding-left: $navMenuMin + 30; }}
```

在Header.vue添加

```
.open {  #header-wrap {    left: $navMenu;  }}.close {  #header-wrap {    left: 64px;  }}
```

在Main.vue添加

```
.open {    .main-content { padding-left: $navMenu + 30; }}.close {    .main-content { padding-left: $navMenuMin + 30; }}
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/b51fb76334484d2699d939641c47512f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)
![在这里插入图片描述](https://img-blog.csdnimg.cn/e14f1ecb50004ed69ba91a790ec6d455.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6IeqJuWmgg==,size_20,color_FFFFFF,t_70,g_se,x_16)

每当我们刷新时，初始的isCollapse总是未折叠状态，可以用cookie存isCollpase,怎么操作